---
title: Pythonの例外処理を学ぼう！try-exceptでエラーに強いプログラムを作る
date: 2025-11-01
categories: [Python]
tags: [AI, Gemini, 自動生成, Python, 例外処理, try, except, エラーハンドリング, プログラミング初心者]
description: プログラム実行中に予期せぬエラーで停止してしまうのを防ぐ「例外処理」。この記事では、Pythonのtry-except文を使ったエラーハンドリングの基本を、初心者にも分かりやすく解説します。
---

この記事はAIによって自動生成されています。

# Pythonの例外処理を学ぼう！try-exceptでエラーに強いプログラムを作る

プログラミングをしていると、様々なエラーに遭遇します。例えば、数値を0で割ろうとしたり（`ZeroDivisionError`）、文字を数値に変換しようとしたり（`ValueError`）すると、プログラムはエラーメッセージを表示して停止してしまいます。

このような予期せぬエラーが発生しても、プログラムを強制終了させずに、適切に対処するための仕組みが「例外処理」です。Pythonでは、主に `try-except` 文を使って例外処理を行います。

## 1. `try-except` の基本的な使い方

`try-except` の基本的な考え方はシンプルです。

*   **`try` ブロック**: エラーが発生する可能性のある処理をこの中に書きます。
*   **`except` ブロック**: `try` ブロック内でエラーが発生した場合に、実行したい処理をこの中に書きます。

**構文:**
```python
try:
    # エラーが発生するかもしれない処理
except:
    # エラーが発生した時の処理
```

**具体例: ゼロ除算エラー**
```python
try:
    num = 10 / 0  # ここでエラーが発生！
    print(num)
except:
    print("エラーが発生しました。0で割ることはできません。")

print("プログラムは停止せずに、ここまで実行されます。")

# 出力:
# エラーが発生しました。0で割ることはできません。
# プログラムは停止せずに、ここまで実行されます。
```
`try` ブロックでエラーが発生すると、Pythonは即座に `except` ブロックにジャンプします。そのため、プログラムがクラッシュすることなく、後続の処理を続けることができます。

## 2. 特定のエラーをキャッチする

`except` の後にエラーの種類（例外クラス）を指定することで、特定のエラーだけを狙ってキャッチすることができます。

```python
try:
    num_str = input("数字を入力してください: ")
    num = int(num_str)
    result = 100 / num
    print(f"100を{num}で割った結果は {result} です。")

except ValueError:
    print("エラー: 数字以外が入力されました。")

except ZeroDivisionError:
    print("エラー: 0で割ることはできません。")

except Exception as e:
    print(f"予期せぬエラーが発生しました: {e}")
```

この例では、
*   もしユーザーが「abc」のような文字を入力すると `ValueError` が発生し、最初の `except` ブロックが実行されます。
*   もしユーザーが「0」を入力すると `ZeroDivisionError` が発生し、2番目の `except` ブロックが実行されます。
*   `Exception as e` は、それ以外の予期せぬエラーをすべてキャッチするための記述です。

## 3. `else` と `finally`

`try-except` 文には、`else` と `finally` というブロックを追加することもできます。

### `else` - エラーがなかった場合に実行

`else` ブロックは、`try` ブロックで**エラーが発生しなかった場合**にのみ実行されます。

```python
try:
    num = int(input("割る数を入力してください: "))
    result = 100 / num
except ValueError:
    print("数字を入力してください。")
else:
    # エラーがなかった時だけ実行
    print(f"計算成功！結果は {result} です。")
```

### `finally` - 常に最後に実行

`finally` ブロックは、**エラーが発生したかどうかに関わらず、必ず最後に実行**されます。ファイルを開いた後に必ず閉じたい場合など、後片付け処理によく使われます。

```python
try:
    f = open("somefile.txt", "r")
    # ... ファイル処理 ...
except FileNotFoundError:
    print("ファイルが見つかりません。")
finally:
    # エラーがあってもなくても、必ず実行
    print("処理を終了します。")
```

## まとめ

今回は、エラーに強いプログラムを作るための例外処理について学びました。

*   **`try`**: エラーが起こりうる処理を書く場所。
*   **`except`**: エラーが起きた時の対処を書く場所。
*   **`else`**: エラーが起きなかった時に実行される。
*   **`finally`**: エラーの有無に関わらず、最後に必ず実行される。

例外処理を適切に使うことで、ユーザーにとって親切で、安定したプログラムを作成することができます。ぜひマスターしておきましょう。

---
この記事はAI（Gemini API）によって自動生成されています。内容の正確性は保証されません。
---